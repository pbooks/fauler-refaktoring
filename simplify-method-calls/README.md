# Упрощение вызовов методов

Интерфейсы составляют суть объектов. Создание простых в понимании и применении интерфейсов – главное искусство в разработке хорошего объектно-ориентированного программного обеспечения. В данной главе изучаются рефакторинги, в результате которых интерфейсы становятся проще.

Часто самое простое и важное, что можно сделать, это дать методу другое имя. Присваивание имен служит ключевым элементом коммуникации. Если вам понятно, как работает программа, не надо бояться применить «Переименование метода» ([Rename Method](/Rename-Method.md)), чтобы передать это понимание. Можно также (и нужно) переименовывать переменные и классы. В целом такие переименования обеспечиваются простой текстовой заменой, поэтому я не добавлял для них особых методов рефакторинга.

Сами параметры играют существенную роль в интерфейсах. Распространенными рефакторингами являются «Добавление параметра» ([Add Parameter](/Add-Parameter.md)) и «Удаление параметра» ([Remove Parameter](/Remove-Parameter.md)). Программисты, не имеющие опыта работы с объектами, часто используют длинные списки параметров, обычные в других средах разработки. Объекты позволяют обойтись короткими списками параметров, а проведение ряда рефакторингов позволяет сделать их еще короче. Если передается несколько значений из объекта, примените «Сохранение всего объекта» ([Preserve Whole Object](/Preserve-Whole-Object.md)), чтобы свести все значения к одному объекту. Если этот объект не существует, можно создать его с помощью «Введения граничного объекта» ([Introduce Parameter Object](/Introduce-Parameter-Object.md)). Если данные могут быть получены от объекта, к которому у метода уже есть доступ, можно исключить параметры с помощью «Замены параметра вызовом метода» ([Replace Parameter with Method](/Replace-Parameter-with-Method.md)). Если параметры служат для определения условного поведения, можно прибегнуть к «Замене параметра явными методами» ([Replace Parameter with Explicit Methods](/Replace-Parameter-with-Explicit-Methods.md)). Несколько аналогичных методов можно объединить, добавив параметр с помощью «Параметризации метода» ([Parameterize Method](/Parameterize-Method.md)).

Даг Ли (Doug Lea) предостерег меня относительно проведения рефакторингов, сокращающих списки параметров. Как правило, они выполняются так, чтобы передаваемые параметры были неизменяемыми, как часто бывает со встроенными объектами или объектами значений. Обычно длинные списки параметров можно заменить неизменяемыми объектами, в противном случае рефакторинги из этой группы следует выполнять с особой осторожностью.

Очень удобное соглашение, которого я придерживаюсь на протяжении многих лет, это четкое разделение методов, изменяющих состояние (модификаторов), и методов, опрашивающих состояние (запросов). Несчетное число раз я сталкивался с неприятностями сам или видел, как попадают в беду другие в результате смешения этих функций. Поэтому, когда я вижу такое смешение, то использую «Разделение запроса и модификатора» ([Separate Query from Modifier](/Separate-Query-from-Modifier.md)), чтобы избавиться от него.

Хорошие интерфейсы показывают только то, что должны, и ничего лишнего. Скрыв некоторые вещи, можно улучшить интерфейс. Конечно, скрыты должны быть все данные (я думаю, нет надобности напоминать об этом), но также и все методы, которые можно скрыть. При проведении рефакторинга часто требуется что то на время открыть, а затем спрятать с помощью «Сокрытия метода» ([Hide Method](/Hide-Method.md)) или «Удаления метода установки» ([Remove Setting Method](/Remove-Setting-Method.md)).

Конструкторы представляют собой особенное неудобство в Java и C++, поскольку требуют знания класса объекта, который надо создать. Часто знать его не обязательно. Необходимость в знании класса можно устранить, применив «Замену конструктора фабричным методом» ([Replace Constructor with Factory Method](/Replace-Constructor-with-Factory-Method.md)).

Жизнь программирующих на Java отравляет также преобразование типов. Старайтесь по возможности избавлять пользователей классов от необходимости выполнять нисходящее преобразование, ограничивая его в каком-то месте с помощью «Инкапсуляции нисходящего преобразования типа» ([Encapsulate Downcast](/Encapsulate-Downcast.md)).

В Java, как и во многих современных языках программирования, есть механизм обработки исключительных ситуаций, облегчающий обработку ошибок. Не привыкшие к нему программисты часто употребляют коды ошибок для извещения о возникших неприятностях. Чтобы воспользоваться этим новым механизмом обработки исключительных ситуаций, можно применить «Замену кода ошибки исключительной ситуацией» ([Replace Error Code with Exception](/Replace-Error-Code-with-Exception.md)). Однако иногда исключительные ситуации не служат правильным решением, и следует выполнить «Замену исключительной ситуации проверкой» ([Replace Exception with Error Code](/Replace-Exception-with-Error-Code.md)).